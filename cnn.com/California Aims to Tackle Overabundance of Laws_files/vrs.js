_vrtrack=function(){},function(a,b){var c,d=a._vrq||[],e="http://t1.visualrevenue.com/",f=new Date,g=11,h=function(a,b){for(var c=d.length;c--;)if(d[c][0]==a)return"undefined"==typeof b?d[c][1]:void(d[c][1]=b);"undefined"!=typeof b&&d.push([a,b])},i={poll_interval:50,timer:null,check_dom_tag:function(a,c){if(b.getElementsByTagName&&setTimeout){var d=b.getElementsByTagName(a);d&&d.length&&d.length>0?(clearTimeout(i.timer),c()):i.timer=setTimeout(function(){i.check_dom_tag(a,c)},i.poll_interval)}}},j=function(a,c,d){d=d||"";var e,f,g,h,i,j=b.getElementsByTagName("head");if(j)for(e=0,g=j.length;g>e;e++)if(i=j[e].getElementsByTagName(a))for(f=0,h=i.length;h>f;f++)if(i[f].getAttribute(c)&&(!d||d==i[f].getAttribute(c).toLowerCase()))return i[f];return null},k=function(a){if(a.indexOf("http://")>-1)return a;var c=function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")},d=b.createElement("div");return d.innerHTML='<a href="'+c(a)+'">x</a>',d.firstChild.href},l=function(){var a=j("meta","property","vr:canonical");if(a&&a.content)return k(a.content);var c=j("link","rel","canonical");if(c&&c.href)return k(c.href);var d=j("meta","property","og:url");return d&&d.content?k(d.content):b.location.href},m=function(){var a=h("refurl");return"undefined"==typeof a&&(a=b.referrer),n()&&(a=c),a},n=function(){if(!D)return!1;var a=j("meta","http-equiv","refresh"),b=null,d=null;return a&&a.content&&(b=decodeURIComponent(q("__vrrefresh")),d=parseInt(a.content.split(";")[0],0),d=Math.round(d/60*100)/100+.1,r("__vrrefresh",encodeURIComponent(c),d,F),b===c)?!0:!1},o=function(){var a=j("meta","http-equiv","content-type");return a?(G=a.content.split("charset=")[1],G&&(G=G.split(";")[0]),G||(G=a.content.split(";")[1],G||(G=a.content))):(a=j("meta","charset",null),a&&(G=a.getAttribute("charset"))),h("charset",G),G},p=function(){var a={"co.uk":1,"co.il":1,"co.in":1,"co.ke":1,"co.ug":1,"com.my":1},c=b.location.hostname,d=c.split("."),e=null;return d.length>=2&&(e=d.slice(-2).join("."),a[e]&&(e=d.slice(-3).join("."))),e},q=function(a){var c,d=a+"=",e=b.cookie.split(";");for(c=0;c<e.length;c++){for(var f=e[c];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(d))return f.substring(d.length,f.length)}return null},r=function(a,c,d,e){var f;if(d){var g=new Date;g.setTime(g.getTime()+60*d*1e3),f="; expires="+g.toGMTString()}else f="";b.cookie=a+"="+c+f+"; path=/; domain=."+e},s=function(){var a,b,c,d="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");for(a=(new Date).getTime().toString(),c=0;32>c;c++)b=Math.floor(62*Math.random()),a+=d[b];return a},t=function(a){return a&&a.tagName&&"a"===a.tagName.toLowerCase()},u=function(a){for(var b=4,c=null;a&&b--;){if(t(a)){c=a;break}a=a.parentNode}return c},v=function(a,b){if(!b||null==a)return-1;var c,d,e=-1;for(c=0,d=a.length;d>c;c++)if(a[c].href===b.href&&(e+=1),a[c]===b)return e;return-1},w=function(a,c,d){var e=function(a){a=a||event,d.apply(b,[a,a.target||a.srcElement])};b.addEventListener?a.addEventListener(c,e,!1):b.attachEvent&&a.attachEvent("on"+c,e)},x=function(a){var b=new Image(1,1);b.src=a},y=function(a,c){c.id&&z(c.id);var d=b.createElement("script"),e=b.getElementsByTagName("script")[0];if(d.src=a,c.id&&(d.id=c.id),c.async&&(d.async=!0),c.onload){var f=!1;d.onload=d.onreadystatechange=function(){f||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(f=!0,c.onload(),d.onload=d.onreadystatechange=null,d.parentNode&&d.parentNode.removeChild(d))}}e.parentNode.insertBefore(d,e)},z=function(a){var c=b.getElementById(a);if(c){c.parentNode.removeChild(c);try{for(var d in c)delete c[d]}catch(e){}}},A=function(a){if(!a)return a;var b,c=[];for(b=0;b<a.length;b++)c.push(a.charCodeAt(b)<128?a.charAt(b):encodeURIComponent(a.charAt(b)));return encodeURIComponent(c.join(""))},B=function(a){return h("track_url",a.track_url),query="?idsite="+a.np,query+="&url="+a.track_url,query+="&seen_url="+a.seen_url,query+="&t="+a.title,query+="&c="+a.cookie,query+="&r="+a.timestamp,query+="&ypos="+a.ypos,query+="&debug="+a.debug,a.ref_url&&(query+="&refurl="+a.ref_url),a.ref_np&&(query+="&refnp="+a.ref_np),a.norm_ref_url&&(query+="&norm_refurl="+a.norm_ref_url),a.conversion_id&&(query+="&cv_id="+a.conversion_id),a.content_type&&(query+="&content_type="+a.content_type),a.no_cookies&&(query+="&no_cookies=true"),a.manual_ping&&(query+="&man=true"),a.mx&&(query+="&mx="+a.mx,query+="&my="+a.my,query+="&sw="+a.sw),query+="&v="+g},C=h("id"),D=!h("no_cookies"),E=q("__vrf"),F=p(),G=null,H=function(a){a=a||{};var d=encodeURIComponent(b.title),g=a.conversion_id,h=q("__vry")||-1;C=a.track_id||C;var i=q("__vrid");c=a.track_url||c;var j=a.ref_url,k=null;a.manual_ping?k=j:(k=q("__vru"),k&&(k=decodeURIComponent(k)));var l=q("__vrl");l=l?decodeURIComponent(l):a.seen_url||c;var m=q("__vrm"),n={};m&&(m=m.split("_"),n.x=m[0],n.y=m[1],n.screen_width=m[2]);var o=(new Date).getTime(),p=new Date-f,r=B({track_url:A(c),seen_url:A(l),ref_url:A(j),norm_ref_url:A(k),np:C,ref_np:i,title:d,cookie:E,debug:"loadTime."+p,timestamp:o,ypos:h,conversion_id:g,content_type:G,mx:n.x,my:n.y,sw:n.screen_width,no_cookies:!D,manual_ping:a.manual_ping});x(e+r),a.automate},I=function(a){a=a||{};var b=a.refurl?a.refurl:c;H({automate:!!a.automate,conversion_id:a.conversion_id,manual_ping:!0,ref_url:b,track_id:a.track_id,track_url:a.track_url})},J=function(){if(!h("no_cookies")){var a=null,d=b.getElementsByTagName("a");w(b,"mousedown",function(e,f){var g=u(f);if(g){var h=v(d,g);r("__vrl",encodeURIComponent(g.href),.4,F),r("__vry",h,.4,F),r("__vru",encodeURIComponent(c),.4,F),q("__vrrefresh")&&r("__vrrefresh",-1,.001,F),r("__vrid",C,.4,F),a=f}else r("__vrl",-1,.001,F),r("__vry",-1,.001,F);var i,j,k;e.pageX||e.pageY?(i=e.pageX,j=e.pageY):(e.clientX||e.clientY)&&(i=e.clientX+b.body.scrollLeft+b.documentElement.scrollLeft,j=e.clientY+b.body.scrollTop+b.documentElement.scrollTop),i&&(k=b.documentElement.clientWidth?b.documentElement.clientWidth:b.body.clientWidth,r("__vrm",i+"_"+j+"_"+k,.4,F))}),w(b,"mouseup",function(b,c){a&&c!==a&&(r("__vrl",-1,.001,F),r("__vry",-1,.001,F),r("__vrm",-1,.001,F)),a=null})}};a._vrtrack=I,D&&!E&&(E=s(),r("__vrf",E,30,F)),i.check_dom_tag("body",function(){c=l(),G=o(),H({ref_url:m(),seen_url:b.location.href})}),J();var K,d,w,h,j,k,l,q,y,z,L="http://p.visualrevenue.com/",M=50,N=50,O=function(){if(K&&console&&console.log){var a=Array.prototype.slice.apply(arguments),b=new Date,c="VR_S ";c+=(b.getMinutes()>9?b.getMinutes():"0"+b.getMinutes())+":",c+=(b.getSeconds()>9?b.getSeconds():"0"+b.getSeconds())+".",c+=b.getMilliseconds()>9?b.getMilliseconds()>99?b.getMilliseconds():"0"+b.getMilliseconds():"00"+b.getMilliseconds(),a.unshift(c),console.log(a.join(" "))}},P=function(){var a={};if(b.querySelectorAll){for(var c=b.querySelectorAll("*[data-vr-zone]"),d=0,e=c.length;e>d;d++){var f=c[d].getAttribute("data-vr-zone");a[f]?a[f].push(c[d]):a[f]=[c[d]]}return a}for(var g=b.all,d=0,e=g.length;e>d;d++){var h=g[d].getAttribute("data-vr-zone");h&&(a[h]?a[h].push(g[d]):a[h]=[g[d]])}return a},Q=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){c||a.apply(e,f),d=null};d?clearTimeout(d):c&&a.apply(e,f),d=setTimeout(g,b||100)}},R=function(a){return a.replace(/\s/g,"")},S=function(){function a(a){return a&&"string"==typeof a&&(a=escape(a).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),c.innerHTML=a,c.innerText?(a=c.innerText,c.innerText=""):(a=c.textContent,c.textContent="")),unescape(a)}var c=b.createElement("div");return a}(),T=function(a,b){if(!a)return 0;var c,d=0,e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",f=a.substr(-b,b),g=f.length;for(c=0;g>c;c++)d=d+e.indexOf(f.charAt(c))+1;return d%b},U=function(a){var b=h("charset"),c="?transport="+a;return c+="&idsite="+h("id"),c+="&url="+(h("track_url")||l()),c+=b?"&content_type="+b:""},V=function(a){var b=L+U("jsonp"),c="callbackFn";b+="&callback=_vrq.jsonp."+c,d.jsonp={},d.jsonp[c]=a,y(b,{async:!0,id:"vr-script-002"})},W=function(a){O("Doing "+a.length+" headline test(s)");for(var b=T(q("__vrf"),2),c=P(),d=0,e=a.length;e>d;d++)X(a[d],c,b)},X=function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");if(O("Cookie Split: "+d[c]),b[a.config.data_vr_zone]){var e=a.content.new_titles[c],f=a.content.current_title,g=a.content.new_images[c],h=a.content.current_image,i=[];a.config.winner&&(e=a.config.winner.title,g=a.config.winner.image,O("A winner was sent, so use that instead"));for(var j=0,k=b[a.config.data_vr_zone].length;k>j&&(i.push(Z(h,g,b[a.config.data_vr_zone][j],!1)),i.push(Y(f,e,b[a.config.data_vr_zone][j],!1)),!i[0]&&!i[1]);j++);}else var l=20,m=setInterval(function(){if(b=P(),b[a.config.data_vr_zone])X(a,b,c);else{if(l>0)return l--,void O("Tries left to find zone: "+l);O('data-vr-zone "'+a.config.data_vr_zone+'" was not found on the page')}clearInterval(m)},100)},Y=function(a,c,d,e){if(!c||a==c)return O("Goal title is current title, do nothing"),!1;O("Searching for headline: "+a);for(var f,g=d.getElementsByTagName("a"),h=!1,i=R(S(a)).toLowerCase(),j=0,k=g.length;k>j;j++)f=g[j].innerHTML,f.length>=a.length&&(f=R(S(f)).toLowerCase(),f==i&&(h=!0,g[j].innerHTML=c,O("Headline found and replaced (anchor value)")));if(!h){if(b.getElementsByTagName){var l;for(j=0;k>j;j++){l=g[j].getElementsByTagName("*");for(var m=-1,n=l.length;++m<n;)child_html=l[m].innerHTML,child_html.length>=a.length/2&&(child_html=R(S(child_html)).toLowerCase(),child_html==i&&(h=!0,l[m].innerHTML=c,O("Headline found and replaced (child value)")))}}h||e||(O("Headline not found"),N>0?(setTimeout(function(){Y(a,c,d,!1),O("Tries left to find headline: "+N)},100),N--):O("Headline not found in zone"))}return h&&!e&&$(Y,a,c,d),h},Z=function(a,b,c,d){if(!b||a==b)return O("Goal image is current image, do nothing"),!1;O("Searching for image: "+a);for(var e,f=c.getElementsByTagName("img"),g=!1,h=0,i=f.length;i>h;h++)e=f[h].src,e==a&&(g=!0,f[h].src=b,O("Image found and replaced"));return g||d||(O("Image not found"),M>0?(setTimeout(function(){Z(a,b,c,!1),O("Tries left to find image: "+M)},100),M--):O("Image not found in zone")),g&&!d&&$(Z,a,b,c),g},$=function(a,b,c,d){var e=Q(function(d){setTimeout(function(){a.call(a,b,c,d.relatedNode,!0)},1)},50,!0);w(d,"DOMNodeInserted",e)},_=function(b,c){if(b.config.manip_test&&"#vr-test-modules"!=a.location.hash)return!1;if(c[b.config.container_zone])c[b.config.container_zone][0].innerHTML=b.served_html,O("Container zone found, loading module");else var d=30,e=setInterval(function(){var a=P();if(a[b.config.container_zone])a[b.config.container_zone][0].innerHTML=b.served_html,O("Container zone found, loading module");else{if(d>0)return d--,void O("Tries left to find zone: "+d);O('data-vr-zone "'+b.config.container_zone+'" was not found on the page')}clearInterval(e)},100)},ab=function(a){O("Doing "+a.length+" module(s)");for(var b=P(),c=0,d=a.length;d>c;c++)_(a[c],b)},bb=function(a){for(var b=[],c=[],d=0;d<a.length;d++)"content_test"==a[d].type?b.push(a[d]):"automation_module"==a[d].type&&c.push(a[d]);ab(c),W(b)},cb=function(){K=q("vr_js_log");var a=h("serving_tasks");a?(O("Inline serving tasks"),bb(a)):(O("Get serving tasks (jsonp)"),V(bb))};h("automate")&&cb()}(window,document);